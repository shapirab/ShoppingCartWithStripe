import{a as V,b as q}from"./chunk-2QCXHFW7.js";import{a as E}from"./chunk-YZL4KRRL.js";import{a as g}from"./chunk-7QKH3KJB.js";import{a as U,d as $}from"./chunk-YLS6ATDG.js";import{b as L}from"./chunk-AJRP26BG.js";import{h as P,j,k as F,na as N}from"./chunk-V5SENJY6.js";import{Jb as k,Mb as u,Nb as v,Ob as e,Pb as i,Qb as B,Ub as R,Uc as y,Vc as S,Xb as A,Zb as h,ac as T,bc as M,db as D,fb as n,gb as p,ia as C,jc as r,kc as a,lc as s,qa as I,ra as _,rb as x,uc as m,vc as l,wc as f,xb as w}from"./chunk-RYDPFYJP.js";var K=(o,d)=>d.id;function Q(o,d){if(o&1&&(e(0,"tr")(1,"td",22)(2,"div",23),B(3,"img",24),e(4,"span"),r(5),i()()(),e(6,"td",22),r(7),i(),e(8,"td",25),r(9),m(10,"currency"),i()()),o&2){let t=d.$implicit;n(3),T("src",t.itemOrdered.imageUrl,D),n(2),a(t.itemOrdered.productName),n(2),s("x",t.quantity,""),n(2),a(l(10,4,t.price))}}function W(o,d){if(o&1){let t=R();e(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),r(4),i(),e(5,"button",4),A("click",function(){I(t);let z=h();return _(z.onBackClick())}),r(6),i()(),e(7,"div",5)(8,"div",6)(9,"h4",7),r(10,"Billing and delivery information"),i(),e(11,"dl")(12,"dt",8),r(13,"Shipping address"),i(),e(14,"dd",9),r(15),m(16,"address"),i()(),e(17,"dl")(18,"dt",8),r(19,"Payment info"),i(),e(20,"dd",9),r(21),m(22,"payment"),i()()(),e(23,"div",6)(24,"h4",7),r(25,"Order details"),i(),e(26,"dl")(27,"dt",8),r(28,"Email address"),i(),e(29,"dd",9),r(30),i()(),e(31,"dl")(32,"dt",8),r(33,"Order status"),i(),e(34,"dd",9),r(35),i()(),e(36,"dl")(37,"dt",8),r(38,"Order date"),i(),e(39,"dd",9),r(40),m(41,"date"),i()()()(),e(42,"div",10)(43,"div",11)(44,"table",12)(45,"tbody",13),u(46,Q,11,6,"tr",null,K),i()()()(),e(48,"div",14)(49,"p",15),r(50,"Order Summary"),i(),e(51,"div",16)(52,"div",6)(53,"dl",17)(54,"dt",18),r(55,"Subtotal"),i(),e(56,"dd",19),r(57),m(58,"currency"),i()(),e(59,"dl",17)(60,"dt",18),r(61,"Discount"),i(),e(62,"dd",20),r(63,"-$0.00"),i()(),e(64,"dl",17)(65,"dt",18),r(66,"Delivery fee"),i(),e(67,"dd",19),r(68),m(69,"currency"),i()()(),e(70,"dl",21)(71,"dt",18),r(72,"Total"),i(),e(73,"dd",19),r(74),m(75,"currency"),i()()()()()()}if(o&2){let t=h();n(4),s("Order summary for order #",t.order.id,""),n(2),a(t.buttonText),n(9),a(l(16,10,t.order.shippingAddress)),n(6),a(l(22,12,t.order.paymentSummary)),n(9),a(t.order.customerEmail),n(5),a(t.order.orderStatus),n(5),a(f(41,14,t.order.orderDate,"medium")),n(6),v(t.order.orderItems),n(11),a(l(58,17,t.order.subtotal)),n(11),a(l(69,19,t.order.deliveryMethod.price)),n(6),a(l(75,21,t.order.total))}}var O=class o{constructor(d,t,c){this.orderService=d;this.activatedRoute=t;this.router=c}accountService=C(L);order;buttonText=this.accountService.isAdmin()?"Back to admin":"back to orders";ngOnInit(){this.loadOrder(),console.log("orderDetailsComponent::onInit()"),console.log("isAdmin: ",this.accountService.isAdmin())}onBackClick(){this.accountService.isAdmin()?this.router.navigateByUrl("admin"):this.router.navigateByUrl("orders")}loadOrder(){let d=this.activatedRoute.snapshot.paramMap.get("id");d&&this.orderService.getOrderDetails(+d).subscribe({next:t=>this.order=t,error:t=>console.log(t)})}static \u0275fac=function(t){return new(t||o)(p(g),p(P),p(j))};static \u0275cmp=x({type:o,selectors:[["app-order-details"]],decls:1,vars:1,consts:[[1,"bg-white","py-8","shadow-md","max-w-screen-lg","mx-auto"],[1,"px-4","w-full"],[1,"flex","justify-between","items-center","align-middle"],[1,"text-2xl","text-center","font-semibold"],["mat-stroked-button","",3,"click"],[1,"mt-8","py-3","border-t","border-gray-200","flex","gap-16"],[1,"space-y-2"],[1,"text-lg","font-semibold"],[1,"font-medium"],[1,"mt-1","font-light"],[1,"mt-4"],[1,"border-y","border-gray-200"],[1,"w-full","text-center"],[1,"divide-y","divide-gray-200"],[1,"space-y-4","rounded-lg","border-y","p-4","border-gray-200","bg-white"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"py-4"],[1,"flex","items-center","gap-4"],["alt","product image",1,"w-10","h-10",3,"src"],[1,"py-4","text-right"]],template:function(t,c){t&1&&w(0,W,76,23,"mat-card",0),t&2&&k(c.order?0:-1)},dependencies:[$,U,N,y,S,V,q],encapsulation:2})};var X=(o,d)=>d.id;function Y(o,d){if(o&1&&(e(0,"tr",10)(1,"th",11),r(2),i(),e(3,"td"),r(4),m(5,"date"),i(),e(6,"td"),r(7),m(8,"currency"),i(),e(9,"td"),r(10),i()()),o&2){let t=d.$implicit;M("routerLink","/orders/",t.id,""),n(2),s("# ",t.id,""),n(2),a(f(5,6,t.orderDate,"medium")),n(3),a(l(8,9,t.total)),n(3),a(t.orderStatus)}}var b=class o{constructor(d){this.orderService=d}orders=[];ngOnInit(){this.getOrders()}getOrders(){this.orderService.getOrdersForUser().subscribe({next:d=>this.orders=d,error:d=>console.log(d)})}static \u0275fac=function(t){return new(t||o)(p(g))};static \u0275cmp=x({type:o,selectors:[["app-order"]],decls:19,vars:0,consts:[[1,"mx-auto","mt-32"],[1,"font-semibold","text-2xl","mb-6","text-center"],[1,"flex","flex-col"],[1,"w-full"],[1,"min-w-full","divide-y","divide-gray-200","cursor-pointer"],[1,"bg-gray-50"],[1,"uppercas","text-gray-600","text-sm"],[1,"text-center","px-6","py-3"],[1,"text-left"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-100",3,"routerLink"],[1,"px-6","py-3"]],template:function(t,c){t&1&&(e(0,"div",0)(1,"h2",1),r(2,"My Orders"),i(),e(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr",6)(8,"th",7),r(9,"Order"),i(),e(10,"th",8),r(11,"Date"),i(),e(12,"th",8),r(13,"Total"),i(),e(14,"th",8),r(15,"Status"),i()()(),e(16,"tbody",9),u(17,Y,11,11,"tr",10,X),i()()()()()),t&2&&(n(17),v(c.orders))},dependencies:[F,y,S],encapsulation:2})};var ye=[{path:"",component:b,canActivate:[E]},{path:":id",component:O,canActivate:[E]}];export{ye as orderRoutes};
