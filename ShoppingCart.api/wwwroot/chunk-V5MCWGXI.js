import{a as D,c as H}from"./chunk-H5S3IECU.js";import{b as F,c as O,f as N,i as E,k as l,m as $,n as f,o as _,r as I,t as z,u as M,v as w,x as R,z as g}from"./chunk-YYHLADZH.js";import{a as T}from"./chunk-YLS6ATDG.js";import{b as L}from"./chunk-AJRP26BG.js";import{h as U,j as h,na as y}from"./chunk-V5SENJY6.js";import"./chunk-W5UVDF5Y.js";import{Eb as p,Jb as v,Kb as P,Mb as j,Nb as k,Ob as n,Pb as o,Qb as c,Xb as C,Zb as x,ac as G,fb as a,gb as u,ia as s,jc as m,kc as S,lc as B,rb as d,xb as b}from"./chunk-RYDPFYJP.js";var A=class r{fb=s(R);accountService=s(L);router=s(h);activatedRoute=s(U);loginForm=this.fb.group({email:["",[l.required,l.email]],password:["",l.required]});returnUrl="shop";constructor(){let e=this.activatedRoute.snapshot.queryParams.returnUrl;e&&(this.returnUrl=e)}onSubmit(){this.loginForm.valid&&this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.router.navigateByUrl(this.returnUrl)},error:e=>{console.error("Login error:",e)}})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-login"]],decls:15,vars:2,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","Email","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"]],template:function(t,i){t&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return i.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Login"),o()(),n(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email address"),o(),c(8,"input",5),o(),n(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),o(),c(12,"input",6),o(),n(13,"button",7),m(14,"Sign in"),o()()()),t&2&&(a(),p("formGroup",i.loginForm),a(12),p("disabled",i.loginForm.invalid))},dependencies:[g,I,E,f,_,M,w,T,N,D,F,y],encapsulation:2})};function X(r,e){if(r&1&&(n(0,"mat-error"),m(1),o()),r&2){let t=x();a(),B("",t.label," is required")}}function Y(r,e){r&1&&(n(0,"mat-error"),m(1,"Email is invalid"),o())}var q=class r{constructor(e){this.controlDir=e;this.controlDir.valueAccessor=this}label="";type="text";writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.controlDir.control}static \u0275fac=function(t){return new(t||r)(u($,2))};static \u0275cmp=d({type:r,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(t,i){t&1&&(n(0,"mat-form-field",0)(1,"mat-label"),m(2),o(),c(3,"input",1),b(4,X,2,1,"mat-error")(5,Y,2,0,"mat-error"),o()),t&2&&(a(2),S(i.label),a(),G("type",i.type),G("placeholder",i.label),p("formControl",i.control),a(),v(i.control.hasError("required")?4:-1),a(),v(i.control.hasError("email")?5:-1))},dependencies:[N,D,O,F,g,E,f,z],encapsulation:2})};function Z(r,e){if(r&1&&(n(0,"li"),m(1),o()),r&2){let t=e.$implicit;a(),S(t)}}function ee(r,e){if(r&1&&(n(0,"div",8)(1,"ul",10),j(2,Z,2,1,"li",null,P),o()()),r&2){let t=x();a(2),k(t.validationErrors)}}var V=class r{constructor(e,t,i){this.accountService=e;this.router=t;this.snack=i}fb=s(R);registerForm=this.fb.group({firstName:["",l.required],lastName:["",l.required],email:["",[l.required,l.email]],password:["",l.required]});validationErrors;onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("registration was successful"),this.router.navigateByUrl("account/login")},error:e=>{this.validationErrors=[];for(let t in e.error.errors)e.error.errors.hasOwnProperty(t)&&this.validationErrors.push(...e.error.errors[t])}})}static \u0275fac=function(t){return new(t||r)(u(L),u(h),u(H))};static \u0275cmp=d({type:r,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First Name","formControlName","firstName"],["label","Last Name","formControlName","lastName"],["label","Email","formControlName","email"],["label","Password","formControlName","password","type","password"],["text-red-600","",1,"mb-3","p-4","bg-red-100"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(t,i){t&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return i.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Register"),o()(),c(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),b(9,ee,4,0,"div",8),n(10,"button",9),m(11,"Register"),o()()()),t&2&&(a(),p("formGroup",i.registerForm),a(8),v(i.validationErrors?9:-1),a(),p("disabled",i.registerForm.invalid))},dependencies:[g,I,f,_,M,w,T,y,q],encapsulation:2})};var Te=[{path:"login",component:A},{path:"register",component:V}];export{Te as accountRoutes};
